---
layout: post
title: 테스트 자동화와 Web UI 테스트 자동화 이해하기 
tags: [TEST]
description: >
 Web UI 테스트 자동화에 대한 간략한 소개와, 작동 방식을 설명합니다. 
author: suji
---

## 서론 
이 글은 예전에 작성해둔 글인데 별로 새로운 정보가 없는 비루한 글이고 
모두가 아는 정보들의 나열이지만 블로그에 컨텐츠를 채우고자 약간 다듬어서 기고 합니다.
틀린 정보가 있을 수 있으니 강력하게 피드백 주시면 적극적으로 반영하겠습니다.
테스트 자동화에 대한 다른 글이나 서적들을 참고하며 쓴 글이기 때문에 중복된 내용이 있을 수 있습니다.
> 아직 많은 내용들이 빠져있어 계속 추가 수정 추가 수정 추가 수정 할 계획입니다.


### 테스트 자동화가 필요한 이유
소프트웨어 테스트 자동화란 소프트웨어 테스트 효율을 높이도록 테스트 자동화를 설계, 개발, 배포하는 전반적인 활동입니다. 
소프트웨어 자동화가 성공적으로 구축된다면 테스트 수행, 평가 및 프로세스에서 많은 시간과 비용, 리소스를 줄일 수 있습니다. 
또한 테스트 커버리지가 늘어나며 수작업과 노동집약적인 업무가 개선되어 수동 테스트 업무가 향상될 수 있습니다.
동시성 테스트, 성능 테스트 등 수동 테스트로는 할 수 없는 테스트도 할 수 있으며, 
궁극적으로 소프트웨어 품질 향상에 기여하여 고객에게 더 좋은 품질의 소프트웨어를 제공할 수 있습니다.



### Web UI 테스트 자동화 구축의 목적 
> 저가 회사에서 가장 많이 작업한 업무가 Web UI 테스트 자동화 입니다.
> 따라서, Web UI 테스트 자동화를 사례로 글을 작성합니다. 

반복적인 동작이나 인간적 사고가 필요없는 테스트는 자동화하기 참 좋은 소스 입니다.
[토스트 클라우드](http://cloud.toast.com)는 Web 테스트의 분량이 매우 많았는데 배포가 있을 때 마다 일일이 수동으로 테스트 하는것은 비효율적인 작업이었습니다.
그래서 원래 기능이 정상 작동이 되는지 확인하는 리그레션 테스트를 Web UI 테스트 자동화로 구축하게 되었습니다.


### Selenium을 선택한 이유
웹 테스트를 위한 많은 도구가 있지만 Selenium이 전세계적으로 가장 많은 사람들이 사용하는 툴이며,
`구글에서 사용하는 Selenium WebDriver`라는 제목의 도서가 출판될 정도로 통용된 도구입니다. 
따라서, Selenium을 Web UI 테스트 자동화 도구로 선택하게 되었습니다. 


### Selenium 이란
Selenium은 웹 애플리케이션 테스트용 무료 오픈소스 툴입니다. 
Selenium WebDriver는 브라우저에 특화된 도구로 브라우저 제어를 쉽게 합니다.
Selenium WebDriver의 강점은 테스트 실행 시 실제 브라우저를 활용하여 테스트를 수행한다는 데 있습니다. 


Selenium은 웹페이지에서 엘리먼트 위치를 지정하는 고급 기술을 제공합니다. 
Selenium의 풍부한 API는 name, id, css 셀렉터, xpath 등 다양한 위치 지정자 기준을 제공합니다.
또한, 웹 엘리먼트를 클릭하거나 텍스트를 입력하는 등의 브라우저 동작 API를 제공합니다. 



### Selenium을 이용한 웹 테스트 자동화 구축 과정
> 로컬에서 테스트를 작성하고 실행하는것 까지의 과정만 소개합니다.
> 테스트 자동화 서버에서의 실행이나 테스트 자동화 구축 환경 세팅 등의 내용은 포함하지 않았습니다.
> (귀찮아서.. 추후에 정리하겠습니다.)

#### 웹 기능 소스코드화

Selenium API를 이용하여 웹 엘리먼트를 검색하고, 동작을 수행하는 코드를 작성합니다. 
웹 페이지 기능을 소스코드화 시킨다는 개념으로 이해하면 조금 더 쉽게 이해할 수 있을 것입니다.


예를 들어, 로그인 동작을 소스코드화 한다면 id 입력 텍스트 박스, pw 입력 텍스트 박스, 로그인 버튼을 변수로 지정하여 엘리먼트를 코드로 작성합니다. 
> 쉬운 이해를 위하여 작성하다보니 Selenium API와 문법이 조금 다릅니다. 

```java
Element idTextbox = findElement("id");
Element pwTextbox = findElement("pw");
Element loginButton = findElement("loginButton");
```


그리고 id 입력, pw 입력, 로그인 버튼 클릭 동작을 수행하는 로그인 이라는 메서드를 만듭니다. 
```java
void login(String id, String pw) {
    idTextbox.setKeys(id);
    pwTextbox.setKeys(pw);
    loginButton.click();
}
```

> 엘리먼트를 변수로 지정하는 이유 : 
> 메소드 안에 직접 엘리먼트를 지정하여도 상관없다. 그러나, 엘리먼트의 재사용율이 높을땐 엘리먼트를 변수로 지정하는것이 유지보수하기에 더 편리하다. 어쨋든, 테스트 자동화 작성자의 스타일에 따라가기 마련이다.  


#### 테스트 코드 작성 (Junit 사용) 

웹 페이지 소스코드화가 완료되었으면, 이제 테스트 코드를 작성합니다. 
테스트 코드 작성에는 위에서 작성한 로그인 메서드를 가져와 작성합니다.

```java
@Test
로그인테스트() {
    login("myid", "mypw");

    // 로그인이 성공하였는지 검증하는 코드
    ...
}
```

#### 테스트 실행

Selenium WebDriver는 브라우저 특화된 툴이기 때문에, 
실제로 테스트를 실행하면 원격으로 내 컴퓨터를 조정하듯이 브라우저를 화면에 띄우고 동작을 자동으로 수행합니다. 

위에 예시로 작성한 로그인 테스트를 실행한다면,
자동으로 브라우저가 실행되고 아이디와 비밀번호를 입력하고 로그인 버튼을 클릭합니다.



#### 테스트 결과 확인

Selenium은 테스트 수행 직후 결과를 바로 보여주기 때문에 웹 애플리케이션에 결함이 있는지 파악하기 쉽습니다.



### Web UI 테스트 자동화를 도입함으로써의 효과
> Web UI 뿐만 아니라 모든 테스트 자동화의 효과와 동일한듯 

- 사이드 이펙트 발견 율이 향상된다. 위에서 설명한 바와 같이 리그레션 테스트를 자동화 시킨다면 테스트 수행 후 바로 결함이 있는지 결과를 볼 수 있다.
- 자동화 테스트는 쉽게 재수행 할 수 있다. 테스터는 이제 실행 버튼 클릭만으로 리그레션 테스트를 자동으로 수행할 수 있다.
- 업무 외 시간에도 실행할 수 있다. 잠자는 시간이나 밥 먹는 시간 등 업무 외 시간에 테스트를 자동으로 실행시킬 수 있다.
- 고급 테스트 이슈에 집중할 수 있다. 자동화 테스트가 실행되는 동안에 테스터는 조금 더 중요한 이슈에 집중하여 업무를 진행할 수 있다.
- 수동으로 수행할 수 없는 것을 테스트 할 수 있다. 자동화된 테스트는 매우 빠른 속도로 진행하기 때문에 빠른 동작이 필요한 테스트나 또는 동시성 테스트, 성능 테스트와 같은 수동으로 수행하기 힘든 테스트를 할 수 있다.
- 애플리케이션의 테스트가 통과하는 것을 눈으로 보고 품질이 어느정도 인지 파악하기가 수월하다. 따라서 프로그램의 품질을 믿고 고객에게 제공할 수 있다.


### 맺음말
물론 테스트 자동화를 구축하는 것이 장점만 있는것은 아닙니다.
가장 큰 단점은 테스트 자동화 구축까지 시간과 비용이 매우 많이 소요된다는 것이고, 
유지보수 가능한 테스트 작성이 매우 어렵다는 것입니다.
이외에도 여러가지 고려해야할 점이 많습니다. 
하지만, 좋은 품질의 소프트웨어를 제공하기 위해서는 도전해볼만한 가치가 있는것 같습니다.